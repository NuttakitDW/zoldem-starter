# docker/Dockerfile.server
FROM golang:1.21-alpine

WORKDIR /app

# Install dependencies
COPY apps/server/go.mod apps/server/go.sum ./
RUN go mod download

# Copy source
COPY apps/server/ ./

# Install air (live reload)
RUN go install github.com/cosmtrek/air@latest

# Expose port
EXPOSE 8080

# Use Air for live reload in dev
CMD ["air"]
